/* Version: 2.7.8 - July 12, 2022 13:34:43 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("vue"),require("registration")):"function"==typeof define&&define.amd?define(["vue","registration"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Vue,t.Registration)}(this,(function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),i=n(e),o={props:{translations:{type:String,default:"{}"}},provide(){return{$translate:(t,e)=>this.$translate(t,e)}},computed:{translationMap(){try{return JSON.parse(this.translations)}catch(t){return{}}}},methods:{$translate(t,e={}){if(!Object.keys(this.translationMap).length)return t;try{if(!Object.keys(e))return this.translationMap[t].trim();return this.translationMap[t].trim().replace(/{{(\w+)}}/g,((t,n)=>e[n]||t))}catch(e){return t}}}},s={props:{content:{type:[String,null],default:null},stepContent:{type:[String,null],default:null}}};function a(t,e,n,r,i,o,s,a,l,d){"boolean"!=typeof s&&(l=a,a=s,s=!1);const p="function"==typeof n?n.options:n;let c;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),r&&(p._scopeId=r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},p._ssrRegister=c):e&&(c=s?function(t){e.call(this,d(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),c)if(p.functional){const t=p.render;p.render=function(e,n){return c.call(n),t(e,n)}}else{const t=p.beforeCreate;p.beforeCreate=t?[].concat(t,c):[c]}return n}const l={mixins:[{props:{visible:{type:Boolean,default:!1}}},s],props:{type:{type:String,default:"info"}},computed:{classes(){return{"tw-block":!0,"tw-rounded-lg":!0,"tw-bg-blue-500":"info"===this.type,"tw-bg-red-500":"error"===this.type,"tw-bg-green-500":"success"===this.type,"tw-text-white":!0,"tw-text-center":!0,"tw-px-4":!0,"tw-py-2":!0,"tw-mb-4":!0}}}};var d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",[t._t("default",[n("p",{class:t.classes},[t._v(t._s(t.content))])])],2):t._e()};d._withStripped=!0;const p=a({render:d,staticRenderFns:[]},undefined,l,undefined,false,undefined,!1,void 0,void 0,void 0);const c={mixins:[s],props:{loading:{type:Boolean,default:!1},showStepButton:{type:Boolean,default:!1}}};var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default",[n("button",{staticClass:"tw-block tw-rounded-lg tw-w-full tw-bg-blue-500 tw-text-white tw-text-center tw-px-4 tw-py-4 hover:tw-bg-blue-600 active:tw-bg-blue-700 focus:tw-outline-none",attrs:{disabled:t.loading}},[t.loading?n("span",[t._v("Loading...")]):t.showStepButton?n("span",[t._v(t._s(t.stepContent))]):n("span",[t._v(t._s(t.content))])])])],2)};u._withStripped=!0;const g=a({render:u,staticRenderFns:[]},undefined,c,undefined,false,undefined,!1,void 0,void 0,void 0);const w={props:{field:{type:String,required:!0},value:{},property:{type:Object,required:!0},registration:{type:Object,required:!0}},methods:{onKeyPress(t){this.$emit("keypress",t)},onKeyUp(t){this.$emit("keyup",t)},onInput(t){this.$emit("input",t)}}};var m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"tw-flex tw-w-full tw-mb-4"},[n("div",{staticClass:"tw-w-full tw-relative"},[n("input",{staticClass:"tw-appearance-none tw-block tw-w-full tw-bg-white tw-text-gray-900 tw-font-medium tw-border tw-border-gray-400 tw-rounded-lg tw-py-3 tw-px-4 tw-leading-tight focus:tw-outline-none tw-shadow-none",attrs:{placeholder:t.property.title,title:t.property.description,"x-moz-errormessage":t.property.description,type:t.property.meta.inputType,name:t.property.meta.inputName,required:t.registration.schema.schema.required.includes(t.field),minlength:t.property.minLength?t.property.minLength:void 0,maxLength:t.property.maxLength?t.property.maxLength:void 0,pattern:t.property.pattern?t.property.pattern:void 0,"data-lpignore":"true"},domProps:{value:t.value},on:{keypress:t.onKeyPress,keyup:t.onKeyUp,input:t.onInput}}),t._v(" "),t.registration.form.errors[t.field]?n("p",{staticClass:"tw-text-red-500 tw-text-xs tw-italic"},[t._v(t._s(t.registration.form.errors[t.field].message))]):t._e()])])};m._withStripped=!0;const f=a({render:m,staticRenderFns:[]},undefined,w,undefined,false,undefined,!1,void 0,void 0,void 0);const h={props:{field:{type:String,required:!0},value:{},property:{type:Object,required:!0},registration:{type:Object,required:!0}},data:()=>({search:null,visible:!1}),computed:{countryCode(){return this.registration.countryCode.getCountryCode()},countryCodes(){return this.registration.countryCode.getCountryCodes().map((t=>({...t,flag:`https://flagicons.lipis.dev/flags/4x3/${t.country_code.toLowerCase()}.svg`}))).filter((t=>!(this.search&&this.search.length>0)||t.country_name.toLowerCase().includes(this.search.toLowerCase())))},flag(){return`https://flagicons.lipis.dev/flags/4x3/${this.countryCode.country_code.toLowerCase()}.svg`}},methods:{toggleDropdown(){this.visible=!this.visible},onKeyPress(t){this.$emit("keypress",t)},onKeyUp(t){this.$emit("keyup",t)},onInput(t){this.$emit("input",t)},setCountryCode(t){this.toggleDropdown(),this.search=null,this.registration.countryCode.setCountryCodeByFlag(t.country_code)}}};var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"tw-flex tw-w-full tw-mb-4"},[n("div",{staticClass:"tw-w-full tw-relative"},[n("div",{staticClass:"tw-flex"},[n("div",{staticClass:"tw-tw-cursor-pointer tw-flex tw-items-center tw-px-2 md:tw-px-4 tw-rounded tw-rounded-r-none tw-bg-gray-100 tw-border tw-border-gray-400 tw-whitespace-no-wrap hover:tw-bg-gray-200",on:{click:t.toggleDropdown}},[n("div",{staticClass:"tw-w-6 tw-h-6 tw-rounded-full tw-border tw-border-gray-400 tw-overflow-hidden tw-bg-no-repeat tw-bg-center tw-bg-cover tw-mr-2",style:"background-image: url("+t.flag+");"}),t._v(" "),n("span",{staticClass:"tw-text-xs"},[t._v(t._s(t.countryCode.dialling_code))])]),t._v(" "),n("input",{staticClass:"tw-appearance-none tw-block tw-w-full tw-bg-white tw-text-gray-900 tw-font-medium tw-border tw-border-l-0 tw-border-gray-400 tw-rounded-r-lg tw-py-3 tw-px-4 tw-leading-tight focus:tw-outline-none tw-shadow-none",attrs:{placeholder:t.property.title,title:t.property.description,"x-moz-errormessage":t.property.description,type:t.property.meta.inputType,name:t.property.meta.inputName,required:t.registration.schema.schema.required.includes(t.field),minlength:t.property.minLength?t.property.minLength:void 0,maxLength:t.property.maxLength?t.property.maxLength:void 0,pattern:t.property.pattern?t.property.pattern:void 0,"data-lpignore":"true"},domProps:{value:t.value},on:{keypress:t.onKeyPress,keyup:t.onKeyUp,input:t.onInput}})]),t._v(" "),t.registration.form.errors[t.field]?n("p",{staticClass:"tw-text-red-500 tw-text-xs tw-italic"},[t._v(t._s(t.registration.form.errors[t.field].message))]):t._e(),t._v(" "),t.visible?n("div",{staticClass:"tw-absolute tw-w-full tw-left-0 tw-right-0 tw-mt-4"},[n("div",{staticClass:"tw-bg-white tw-rounded tw-border tw-shadow-lg tw-h-64 tw-overflow-auto"},[n("div",{staticClass:"tw-bg-gray-100 tw-border-b tw-px-4 tw-py-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"tw-appearance-none tw-block tw-w-full tw-bg-white tw-text-gray-900 tw-text-sm tw-font-medium tw-border tw-border-gray-400 tw-rounded-lg tw-py-2 tw-px-4 tw-leading-tight focus:tw-outline-none tw-shadow-none",attrs:{type:"search",placeholder:t.countryCode.country_name+"..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),t._l(t.countryCodes,(function(e,r){return n("div",{key:r,staticClass:"js-registration-country-selector tw-cursor-pointer tw-flex tw-items-center tw-px-4 tw-py-2 hover:tw-bg-gray-100",on:{click:function(n){return t.setCountryCode(e)}}},[n("div",{staticClass:"js-registration-country-selector tw-w-6 tw-h-6 tw-rounded-full tw-border tw-border-gray-400 tw-overflow-hidden tw-bg-no-repeat tw-bg-center tw-bg-cover tw-mr-2",style:"background-image: url("+e.flag+");"}),t._v(" "),n("p",{staticClass:"js-registration-country-selector tw-flex-1 tw-overflow-ellipsis tw-overflow-hidden"},[t._v(t._s(e.country_name))]),t._v(" "),n("p",{staticClass:"js-registration-country-selector tw-text-xs tw-text-gray-500"},[t._v(t._s(e.dialling_code))])])}))],2)]):t._e()])])};y._withStripped=!0;const b=a({render:y,staticRenderFns:[]},undefined,h,undefined,false,undefined,!1,void 0,void 0,void 0);const v={props:{field:{type:String,required:!0},value:{},property:{type:Object,required:!0},registration:{type:Object,required:!0}},methods:{onChange(t){this.$emit("change",t)}}};var x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"tw-flex tw-w-full tw-mb-4"},[n("div",{staticClass:"tw-w-full tw-relative"},[n("label",{staticClass:"tw-flex tw-items-start tw-justify-left"},[n("input",{staticClass:"tw-block tw-text-indigo-600 tw-border-gray-300 tw-rounded tw-mr-4 tw-flex-shrink-0",staticStyle:{"margin-top":"5px","margin-right":"10px"},attrs:{id:t.field,placeholder:t.property.title,title:t.property.description,"x-moz-errormessage":t.property.description,type:t.property.meta.inputType,name:t.property.meta.inputName,required:t.registration.schema.schema.required.includes(t.field),minlength:t.property.minLength?t.property.minLength:void 0,maxLength:t.property.maxLength?t.property.maxLength:void 0,pattern:t.property.pattern?t.property.pattern:void 0,"data-lpignore":"true"},domProps:{value:t.value,checked:!!t.value},on:{change:t.onChange}}),t._v(" "),n("span",{staticClass:"tw-text-sm tw-text-gray-700 tw-block form-checkbox"},[t._v(t._s(t.property.title))])]),t._v(" "),t.registration.form.errors[t.field]?n("p",{staticClass:"tw-text-red-500 tw-text-xs tw-italic"},[t._v(t._s(t.registration.form.errors[t.field].message))]):t._e()])])};x._withStripped=!0;const k=a({render:x,staticRenderFns:[]},undefined,v,undefined,false,undefined,!1,void 0,void 0,void 0);var S={inject:["$translate"],props:{field:{type:String,required:!0},value:{},property:{type:Object,required:!0},registration:{type:Object,required:!0},underageRedirectLink:{type:[String,null]}},methods:{onChange(t){this.$emit("change",t)}}};const _="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function C(t){return(t,e)=>function(t,e){const n=_?e.media||"default":t,r=A[n]||(A[n]={ids:new Set,styles:[]});if(!r.ids.has(t)){r.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",e.media&&r.element.setAttribute("media",e.media),void 0===R&&(R=document.head||document.getElementsByTagName("head")[0]),R.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const t=r.ids.size-1,e=document.createTextNode(n),i=r.element.childNodes;i[t]&&r.element.removeChild(i[t]),i.length?r.element.insertBefore(e,i[t]):r.element.appendChild(e)}}}(t,e)}let R;const A={};const B=S;var T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"tw-text-sm tw-font-bold tw-text-gray-700 tw-block tw-text-center tw-mb-4"},[t._v(t._s(t.property.title))]),t._v(" "),n("label",{staticClass:"tw-block tw-cursor-pointer tw-mb-4 tw-rounded-lg tw-w-full tw-bg-blue-500 tw-text-white tw-text-center tw-px-4 tw-py-4 hover:tw-bg-blue-600 active:tw-bg-blue-700 focus:tw-outline-none",attrs:{for:t.field}},[t._v(t._s(t.$translate("yes")))]),t._v(" "),n("input",{staticClass:"visually-hidden",attrs:{for:"toggle",id:t.field,placeholder:t.property.title,title:t.property.description,"x-moz-errormessage":t.property.description,type:t.property.meta.inputType,name:t.property.meta.inputName,required:t.registration.schema.schema.required.includes(t.field),minlength:t.property.minLength?t.property.minLength:void 0,maxLength:t.property.maxLength?t.property.maxLength:void 0,pattern:t.property.pattern?t.property.pattern:void 0,"data-lpignore":"true"},domProps:{value:t.value,checked:!!t.value},on:{change:t.onChange}}),t._v(" "),n("a",{staticClass:"tw-mb-4 tw-border tw-block tw-rounded-lg tw-font-bold tw-w-full tw-text-blue-600 tw-border-blue-500 tw-text-white tw-text-center tw-px-4 tw-py-4 hover:tw-bg-blue-100 focus:tw-outline-none",attrs:{href:t.underageRedirectLink}},[t._v(t._s(t.$translate("no")))])])};T._withStripped=!0;const $={components:{RegistrationFormInput:f,RegistrationFormTelephoneInput:b,RegistrationFormCheckboxInput:k,RegistrationFormCheckboxButton:a({render:T,staticRenderFns:[]},(function(t){t&&t("data-v-05a1b95e_0",{source:"\n.visually-hidden[data-v-05a1b95e] {\n  position: absolute;\n  left: -100vw;\n}\n",map:{version:3,sources:["/Users/nathanmerry/.investoo/tools/registration/src/components/registration-form-checkbox-button.vue"],names:[],mappings:";AA8DA;EACA,kBAAA;EACA,YAAA;AACA",file:"registration-form-checkbox-button.vue",sourcesContent:['<template>\n<div>\n    <span class="tw-text-sm tw-font-bold tw-text-gray-700 tw-block tw-text-center tw-mb-4">{{ property.title }}</span>\n    <label\n      :for="field"\n      class="tw-block tw-cursor-pointer tw-mb-4 tw-rounded-lg tw-w-full tw-bg-blue-500 tw-text-white tw-text-center tw-px-4 tw-py-4 hover:tw-bg-blue-600 active:tw-bg-blue-700 focus:tw-outline-none"\n    >{{ $translate(\'yes\') }}</label>\n    <input\n      for="toggle"\n      :id="field"\n      :value="value"\n      :checked="!!value"\n      :placeholder="property.title"\n      :title="property.description"\n      :x-moz-errormessage="property.description"\n      :type="property.meta.inputType"\n      :name="property.meta.inputName"\n      :required="registration.schema.schema.required.includes(field)"\n      :minlength="property.minLength ? property.minLength : undefined"\n      :maxLength="property.maxLength ? property.maxLength : undefined"\n      :pattern="property.pattern ? property.pattern : undefined"  \n      data-lpignore="true"\n      class="visually-hidden"\n      @change="onChange"\n    >\n    <a\n      :href="underageRedirectLink"\n      class="tw-mb-4 tw-border tw-block tw-rounded-lg tw-font-bold tw-w-full tw-text-blue-600 tw-border-blue-500 tw-text-white tw-text-center tw-px-4 tw-py-4 hover:tw-bg-blue-100 focus:tw-outline-none"\n    >{{ $translate(\'no\') }}</a>\n  </div>\n</template>\n\n<script>\nexport default {\n  inject: [\'$translate\'],\n  props: {\n    field: {\n      type: String,\n      required: true\n    },\n    value: {},\n    property: {\n      type: Object,\n      required: true,\n    },\n    registration: {\n      type: Object,\n      required: true,\n    },\n    underageRedirectLink: {\n      type: [String, null],\n    },\n  },\n  methods: {\n    onChange(event) {\n      this.$emit(\'change\', event)\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n.visually-hidden {\n  position: absolute;\n  left: -100vw;\n}\n</style>']},media:void 0})}),B,"data-v-05a1b95e",false,undefined,!1,C,void 0,void 0)},props:{field:{type:String,required:!0},value:{},property:{type:Object,required:!0},registration:{type:Object,required:!0},steps:{type:Boolean,default:!1},underageRedirectLink:{type:[String,null]}},computed:{component(){return this.steps&&["checkbox"].includes(this.property.meta.inputType)?"checkbox-button":["checkbox"].includes(this.property.meta.inputType)?"checkbox-input":["tel"].includes(this.property.meta.inputType)?"telephone-input":"input"}},methods:{onKeyPress(t){this.$emit("keypress",t)},onKeyUp(t){this.$emit("keyup",t)},onInput(t){this.$emit("input",t.target.value)},onChange(t){this.$emit("input",t.target.checked)}}};var F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",[n("registration-form-"+t.component,{tag:"component",attrs:{field:t.field,value:t.value,property:t.property,registration:t.registration,"underage-redirect-link":t.underageRedirectLink},on:{keypress:t.onKeyPress,keyup:t.onKeyUp,input:t.onInput,change:t.onChange}})],1)};F._withStripped=!0;const L={name:"RegistrationForm",components:{RegistrationFormInputHandler:a({render:F,staticRenderFns:[]},undefined,$,undefined,false,undefined,!1,void 0,void 0,void 0),RegistrationFormAlert:p,RegistrationFormButton:g},mixins:[o],props:{environment:{type:String,default:"staging"},url:{type:String,default:window.location.origin},componentType:{type:String,default:"registration-form"},registerEndpoint:{type:String,default:"/services/offers/register"},schemaEndpoint:{type:String,default:"/services/offers/register"},offer:{type:String,required:!0},fake:{type:Boolean,default:!1},countryCode:{type:String,default:"GB"},language:{type:String,default:"en"},block:{type:String,default:"hero"},clickId:{type:[String,null],default:new URLSearchParams(window.location.search).get("clickId")},clientDate:{type:[String,null],default:(new Date).toString()},pvid:{type:[String,null],default:new URLSearchParams(window.location.search).get("pvid")},successMessage:{type:String,default:"Thanks for registering, we’ll be in touch."},unexpectedMessage:{type:String,default:"Unexpected error, please try again"},loadingMessage:{type:String,default:"Your registration is still in progress"},buttonText:{type:String,default:"Register Now"},stepButtonText:{type:String,default:"Next"},sendToPartner:{type:Boolean,default:!0},includesConsent:{type:Boolean,default:!1},includesMinimumAge:{type:Boolean,default:!1},verificationUri:{type:[String,null],default:null},steps:{type:Boolean,default:!1},underageRedirectLink:{type:[String,null]}},data(){return{loading:!1,loadingTimeout:null,messages:{unexpected:!1,loading:!1},registration:new i.default(this.environment,{uri:this.url,sendToPartner:this.sendToPartner,includesConsent:this.includesConsent,includesMinimumAge:this.includesMinimumAge,verificationUri:this.verificationUri,endpoints:{schema:this.schemaEndpoint,registration:this.registerEndpoint},formData:{offer:this.offer,countryCode:this.countryCode,language:this.language,clickId:this.clickId,clientDate:this.clientDate,pvid:this.pvid,block:this.block}})}},computed:{properties(){return this.registration.schema.schema.properties},currentStepProperties(){return this.registration.schema.schema.steps[this.registration.schema.currentStep]},showStepButton(){return!!this.steps&&this.registration.schema.schema.steps.length-1>this.registration.schema.currentStep},formButtonName(){return this.showStepButton?"step-button":"button"},currentStepIsBoolean(){return Object.entries(this.properties).find((([t,{type:e}])=>this.currentStepProperties.includes(t)&&"boolean"===e))},showFormButtonComponent(){return!this.steps||!this.currentStepIsBoolean}},watch:{loading(t){t&&(this.loadingTimeout=setTimeout((()=>this.messages.loading=this.loading),6e3))}},methods:{onInput(){this.steps&&this.currentStepIsBoolean&&this.onRegistration()},stepBackground(t){return`background: ${this.registration.schema.currentStep===t?"#de4330":"#5fa5fa"}`},reset(){this.loading=!1,this.loadingTimeout=null,this.messages.unexpected=!1,this.messages.loading=!1,clearTimeout(this.loadingTimeout)},inputRules(t,e){if("phone"===e&&!/\d/.test(t.key)&&" "!==t.key)return t.preventDefault()},shouldShowField(t,e){return!!e.meta&&("hidden"!==e.meta.inputType&&(!(!this.show_opt_in&&"optIn"===t)&&(!(void 0!==this.allowedFields&&!this.allowedFields.includes(t))&&(!this.steps||this.currentStepProperties.includes(t)))))},onFailureRegistration(){this.reset(),this.registration.form.error||(this.messages.unexpected=!0)},onSuccessfulRegistration(){this.reset();const t=new URLSearchParams(window.location.search).get("language")||"en",e=this.verificationUri,n=this.registration.form.getRedirectUrl();if(e){const e=`&redirect=${n}`;window.top.location.href=`https://${window.location.hostname}/verification?language=${t}${e}`}!e&&n&&(window.top.location.href=n)},onFakeRegistration(){this.reset(),this.registration.form.setSuccess(!0),this.registration.form.setRedirectUrl(null)},onRegistration(){return this.showStepButton?this.registration.schema.incrementStep():(this.loading=!0,this.fake?this.onFakeRegistration():void this.registration.form.register().then(this.onSuccessfulRegistration).catch(this.onFailureRegistration))}}};var I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"tw-antialiased tw-font-sans",attrs:{"data-version":"2.7.8"}},[t._t("header"),t._v(" "),n("section",{staticClass:"tw-p-4"},[t.steps&&!t.registration.form.success?n("div",{staticClass:"tw-px-4 tw-pb-6"},[n("div",{staticClass:"tw-relative tw-flex tw-items-center tw-justify-between tw-w-10/12 tw-mx-auto steps tw-z-20"},t._l(t.registration.schema.schema.steps,(function(e,r){return n("span",{key:r,staticClass:"tw-flex tw-items-center tw-justify-center tw-block tw-font-bold tw-text-white tw-rounded-full tw-step tw-h-7 tw-w-7",style:t.stepBackground(r)},[t._v(t._s(r+1))])})),0)]):t._e(),t._v(" "),n("registration-form-alert",{attrs:{content:t.successMessage,visible:t.registration.form.success,"has-content":!!t.$slots.success,type:"success"}},[t._t("success")],2),t._v(" "),n("registration-form-alert",{attrs:{content:t.unexpectedMessage,visible:t.messages.unexpected,"has-content":!!t.$slots.unexpected,type:"error"}},[t._t("unexpected")],2),t._v(" "),n("registration-form-alert",{attrs:{content:t.loadingMessage,visible:t.messages.loading,"has-content":!!t.$slots.loading}},[t._t("loading")],2),t._v(" "),t.registration.form.success?t._e():n("form",{on:{submit:function(e){return e.preventDefault(),t.onRegistration(e)}}},[t._l(t.properties,(function(e,r){return[t.shouldShowField(r,e)?[n("registration-form-input-handler",{key:r,attrs:{field:r,property:e,registration:t.registration,steps:t.steps,"underage-redirect-link":t.underageRedirectLink},on:{keypress:function(e){return t.inputRules(e,r)},keyup:function(e){return t.registration.schema.cacheFormFieldByKey(r)},input:function(e){return t.onInput(e,r)}},model:{value:t.registration.schema.formData[r],callback:function(e){t.$set(t.registration.schema.formData,r,e)},expression:"registration.schema.formData[field]"}})]:t._e()]})),t._v(" "),t.showFormButtonComponent?n("registration-form-button",{attrs:{content:t.buttonText,stepContent:t.stepButtonText,loading:t.loading,"has-content":!!t.$slots.button,"show-step-button":t.showStepButton}},[t._t(t.formButtonName,null,{loading:t.loading})],2):t._e()],2)],1),t._v(" "),t._t("footer")],2)};I._withStripped=!0;const U=a({render:I,staticRenderFns:[]},(function(t){t&&t("data-v-88ed53c0_0",{source:'\n.steps:before {\n  content: "";\n  height: 2px;\n  width: 100%;\n  position: absolute;\n  background: #cad0db;\n  z-index: -1;\n}\n',map:{version:3,sources:["/Users/nathanmerry/.investoo/tools/registration/src/components/registration-form.vue"],names:[],mappings:";AAwSA;EACA,WAAA;EACA,WAAA;EACA,WAAA;EACA,kBAAA;EACA,mBAAA;EACA,WAAA;AACA",file:"registration-form.vue",sourcesContent:['<template>\n  <main class="tw-antialiased tw-font-sans" data-version=\'{version}\'>\n    <slot name="header" />\n    <section class="tw-p-4">\n      <div v-if="steps && !registration.form.success" class="tw-px-4 tw-pb-6">\n        <div class="tw-relative tw-flex tw-items-center tw-justify-between tw-w-10/12 tw-mx-auto steps tw-z-20">\n          <span\n            v-for="(step, index) in registration.schema.schema.steps"\n            :key="index"\n            :style="stepBackground(index)"\n            class="tw-flex tw-items-center tw-justify-center tw-block tw-font-bold tw-text-white tw-rounded-full tw-step tw-h-7 tw-w-7"\n          >{{ index + 1 }}</span>\n        </div>\n      </div>\n\n      <registration-form-alert :content="successMessage" :visible="registration.form.success" :has-content="!!$slots[\'success\']" type="success">\n        <slot name="success" />\n      </registration-form-alert>\n\n      <registration-form-alert :content="unexpectedMessage" :visible="messages.unexpected" :has-content="!!$slots[\'unexpected\']" type="error">\n        <slot name="unexpected" />\n      </registration-form-alert>\n\n      <registration-form-alert :content="loadingMessage" :visible="messages.loading" :has-content="!!$slots[\'loading\']">\n        <slot name="loading" />\n      </registration-form-alert>\n\n      <form v-if="!registration.form.success" @submit.prevent="onRegistration">\n        <template v-for="(property, field) in properties">\n          <template v-if="shouldShowField(field, property)">\n          <registration-form-input-handler\n              v-model="registration.schema.formData[field]"\n              :key="field"\n              :field="field"\n              :property="property"\n              :registration="registration"\n              :steps="steps"\n              :underage-redirect-link="underageRedirectLink"\n              @keypress="inputRules($event, field)"\n              @keyup="registration.schema.cacheFormFieldByKey(field)"\n              @input="onInput($event, field)"\n            />\n          </template>\n        </template>\n        <registration-form-button\n          v-if="showFormButtonComponent"\n          :content="buttonText"\n          :stepContent="stepButtonText"\n          :loading="loading"\n          :has-content="!!$slots[\'button\']"\n          :show-step-button="showStepButton"\n        >\n          <slot :name="formButtonName" :loading="loading" />\n        </registration-form-button>\n      </form>\n    </section>\n    <slot name="footer" />\n  </main>\n</template> \n\n<script>\nimport HandleTranslations from \'../mixins/HandleTranslations.js\'\nimport Registration from \'registration\'\nimport RegistrationFormAlert from \'./registration-form-alert.vue\'\nimport RegistrationFormButton from \'./registration-form-button.vue\'\nimport RegistrationFormInputHandler from \'./registration-form-input-handler.vue\'\nexport default {\n  name: \'RegistrationForm\',\n  components: { RegistrationFormInputHandler, RegistrationFormAlert, RegistrationFormButton },\n  mixins: [HandleTranslations],\n  props: {\n    environment: {\n      type: String,\n      default: \'staging\'\n    },\n    url: {\n      type: String,\n      default: window.location.origin,\n    },\n    componentType: {\n      type: String,\n      default: \'registration-form\'\n    },\n    registerEndpoint: {\n      type: String,\n      default: \'/services/offers/register\',\n    },\n    schemaEndpoint: {\n      type: String,\n      default: \'/services/offers/register\',\n    },\n    offer: {\n      type: String,\n      required: true\n    },\n    fake: {\n      type: Boolean,\n      default: false,\n    },\n    countryCode: {\n      type: String,\n      default: \'GB\'\n    },\n    language: {\n      type: String,\n      default: \'en\'\n    },\n    block: {\n      type: String,\n      default: \'hero\'\n    },\n    clickId: {\n      type: [String, null],\n      default: new URLSearchParams(window.location.search).get(\'clickId\')\n    },\n    clientDate: {\n      type: [String, null],\n      default: new Date().toString()\n    },\n    pvid: {\n      type: [String, null],\n      default: new URLSearchParams(window.location.search).get(\'pvid\')\n    },\n    successMessage: {\n      type: String,\n      default: \'Thanks for registering, we’ll be in touch.\',\n    },\n    unexpectedMessage: {\n      type: String,\n      default: \'Unexpected error, please try again\',\n    },\n    loadingMessage: {\n      type: String,\n      default: \'Your registration is still in progress\',\n    },\n    buttonText: {\n      type: String,\n      default: \'Register Now\',\n    },\n    stepButtonText: {\n      type: String,\n      default: \'Next\',\n    },\n    sendToPartner: {\n      type: Boolean,\n      default: true\n    },\n    includesConsent: {\n      type: Boolean,\n      default: false\n    },\n    includesMinimumAge: {\n      type: Boolean,\n      default: false\n    },\n    verificationUri: {\n      type: [String, null],\n      default: null\n    },\n    steps: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Default link to use if the user is not over minumum age\n     */\n    underageRedirectLink: {\n      type: [String, null],\n    },\n  },\n  data () {\n    return {\n      loading: false,\n      loadingTimeout: null,\n      messages: {\n        unexpected: false,\n        loading: false,\n      },\n      registration: new Registration(this.environment, {\n        uri: this.url,\n        sendToPartner: this.sendToPartner,\n        includesConsent: this.includesConsent,\n        includesMinimumAge: this.includesMinimumAge,\n        verificationUri: this.verificationUri,\n        endpoints: {\n          schema: this.schemaEndpoint,\n          registration: this.registerEndpoint,\n        },\n        formData: {\n          offer: this.offer,\n          countryCode: this.countryCode,\n          language: this.language,\n          clickId: this.clickId,\n          clientDate: this.clientDate,\n          pvid: this.pvid,\n          block: this.block\n        },\n      }),\n    }\n  },\n  computed: {\n    properties() {\n      return this.registration.schema.schema.properties\n    },\n    currentStepProperties() {\n      return this.registration.schema.schema.steps[this.registration.schema.currentStep]\n    },\n    showStepButton() {\n      if (!this.steps) return false\n      return this.registration.schema.schema.steps.length - 1 > this.registration.schema.currentStep\n    },\n    formButtonName() {\n      return this.showStepButton ? \'step-button\' : \'button\'\n    },\n    currentStepIsBoolean() {\n      return Object.entries(this.properties).find(([propertyName, { type }]) =>\n        this.currentStepProperties.includes(propertyName) && type === \'boolean\'\n      )\n    },\n    showFormButtonComponent() {\n      if (!this.steps) return true\n      return !this.currentStepIsBoolean\n    },\n  },\n  watch: {\n    loading(isLoading) {\n      if (isLoading)\n        this.loadingTimeout = setTimeout(() => this.messages.loading = this.loading, 6000)\n    },\n  },\n  methods: {\n    onInput() {\n      if (this.steps && this.currentStepIsBoolean) this.onRegistration()\n    },\n    stepBackground(index) {\n      const color = this.registration.schema.currentStep === index ? \'#de4330\' : \'#5fa5fa\'\n      return `background: ${color}`\n    },\n    reset () {\n      this.loading = false\n      this.loadingTimeout = null\n      this.messages.unexpected = false\n      this.messages.loading = false\n      clearTimeout(this.loadingTimeout)\n    },\n    inputRules(event, field) {\n      if (field === "phone" && (!/\\d/.test(event.key) && event.key !== " "))\n        return event.preventDefault()\n    },\n    shouldShowField(key, field) {\n      if (!field.meta) return false\n      if (field.meta.inputType === \'hidden\') return false\n      if (!this.show_opt_in && key === \'optIn\') return false\n      if (typeof this.allowedFields !== \'undefined\') {\n        if (!this.allowedFields.includes(key)) return false\n      }\n      if (this.steps) return this.currentStepProperties.includes(key)\n      return true\n    },\n    onFailureRegistration() {\n      this.reset()\n      if (!this.registration.form.error)\n        this.messages.unexpected = true\n    },\n    onSuccessfulRegistration() {\n      this.reset()\n      const language = new URLSearchParams(window.location.search).get(\'language\') || \'en\'\n      const verificationUri = this.verificationUri\n      const redirectUrl = this.registration.form.getRedirectUrl()\n      \n      if (verificationUri) {\n        const concat = `&redirect=${redirectUrl}`\n        window.top.location.href = `https://${window.location.hostname}/verification?language=${language}${concat}` \n      }\n      if (!verificationUri && redirectUrl) {\n        window.top.location.href = redirectUrl\n      }\n    },\n    onFakeRegistration() {\n      this.reset()\n      this.registration.form.setSuccess(true)\n      this.registration.form.setRedirectUrl(null)\n    },\n    onRegistration() {\n      if (this.showStepButton) return this.registration.schema.incrementStep() \n\n      this.loading = true\n      if (this.fake) return this.onFakeRegistration()\n      this.registration.form.register()\n        .then(this.onSuccessfulRegistration)\n        .catch(this.onFailureRegistration)\n    },\n  }\n}\n<\/script>\n<style>\n  .steps:before {\n    content: "";\n    height: 2px;\n    width: 100%;\n    position: absolute;\n    background: #cad0db;\n    z-index: -1;\n  }\n</style>']},media:void 0})}),L,undefined,false,undefined,!1,C,void 0,void 0);!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}("/*! tailwindcss v2.0.4 | MIT License | https://tailwindcss.com*/\n\n/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}button,input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}progress{vertical-align:baseline}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}p{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset{margin:0;padding:0}*,:after,:before{box-sizing:border-box;border:0 solid #e5e7eb}input::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder{opacity:1;color:#9ca3af}button{cursor:pointer}a{color:inherit;text-decoration:inherit}button,input{padding:0;line-height:inherit;color:inherit}svg{display:block;vertical-align:middle}.tw-appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.tw-bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.tw-bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.tw-bg-red-500{--tw-bg-opacity:1;background-color:rgba(239,68,68,var(--tw-bg-opacity))}.tw-bg-green-500{--tw-bg-opacity:1;background-color:rgba(16,185,129,var(--tw-bg-opacity))}.tw-bg-blue-500{--tw-bg-opacity:1;background-color:rgba(59,130,246,var(--tw-bg-opacity))}.hover\\:tw-bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.hover\\:tw-bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.hover\\:tw-bg-blue-100:hover{--tw-bg-opacity:1;background-color:rgba(219,234,254,var(--tw-bg-opacity))}.hover\\:tw-bg-blue-600:hover{--tw-bg-opacity:1;background-color:rgba(37,99,235,var(--tw-bg-opacity))}.tw-bg-center{background-position:50%}.tw-bg-no-repeat{background-repeat:no-repeat}.tw-bg-cover{background-size:cover}.tw-border-gray-300{--tw-border-opacity:1;border-color:rgba(209,213,219,var(--tw-border-opacity))}.tw-border-gray-400{--tw-border-opacity:1;border-color:rgba(156,163,175,var(--tw-border-opacity))}.tw-border-blue-500{--tw-border-opacity:1;border-color:rgba(59,130,246,var(--tw-border-opacity))}.tw-rounded{border-radius:.25rem}.tw-rounded-lg{border-radius:.5rem}.tw-rounded-full{border-radius:9999px}.tw-rounded-r-none{border-top-right-radius:0;border-bottom-right-radius:0}.tw-rounded-r-lg{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.tw-border{border-width:1px}.tw-border-l-0{border-left-width:0}.tw-border-b{border-bottom-width:1px}.tw-cursor-pointer{cursor:pointer}.tw-block{display:block}.tw-flex{display:flex}.tw-items-start{align-items:flex-start}.tw-items-center{align-items:center}.tw-justify-center{justify-content:center}.tw-justify-between{justify-content:space-between}.tw-flex-1{flex:1 1 0%}.tw-flex-shrink-0{flex-shrink:0}.tw-font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.tw-font-medium{font-weight:500}.tw-font-bold{font-weight:700}.tw-h-6{height:1.5rem}.tw-h-7{height:1.75rem}.tw-h-64{height:16rem}.tw-text-xs{font-size:.75rem;line-height:1rem}.tw-text-sm{font-size:.875rem;line-height:1.25rem}.tw-leading-tight{line-height:1.25}.tw-mx-auto{margin-left:auto;margin-right:auto}.tw-mr-2{margin-right:.5rem}.tw-mt-4{margin-top:1rem}.tw-mr-4{margin-right:1rem}.tw-mb-4{margin-bottom:1rem}.focus\\:tw-outline-none:focus{outline:2px solid transparent;outline-offset:2px}.tw-overflow-auto{overflow:auto}.tw-overflow-hidden{overflow:hidden}.tw-p-4{padding:1rem}.tw-py-2{padding-top:.5rem;padding-bottom:.5rem}.tw-px-2{padding-left:.5rem;padding-right:.5rem}.tw-py-3{padding-top:.75rem;padding-bottom:.75rem}.tw-py-4{padding-top:1rem;padding-bottom:1rem}.tw-px-4{padding-left:1rem;padding-right:1rem}.tw-pb-6{padding-bottom:1.5rem}.tw-absolute{position:absolute}.tw-relative{position:relative}.tw-right-0{right:0}.tw-left-0{left:0}*{--tw-shadow:0 0 transparent}.tw-shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}.tw-shadow-lg,.tw-shadow-none{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.tw-shadow-none{--tw-shadow:0 0 transparent}*{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.tw-text-center{text-align:center}.tw-text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.tw-text-gray-500{--tw-text-opacity:1;color:rgba(107,114,128,var(--tw-text-opacity))}.tw-text-gray-700{--tw-text-opacity:1;color:rgba(55,65,81,var(--tw-text-opacity))}.tw-text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.tw-text-red-500{--tw-text-opacity:1;color:rgba(239,68,68,var(--tw-text-opacity))}.tw-text-blue-600{--tw-text-opacity:1;color:rgba(37,99,235,var(--tw-text-opacity))}.tw-text-indigo-600{--tw-text-opacity:1;color:rgba(79,70,229,var(--tw-text-opacity))}.tw-overflow-ellipsis{text-overflow:ellipsis}.tw-italic{font-style:italic}.tw-antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.tw-w-6{width:1.5rem}.tw-w-7{width:1.75rem}.tw-w-10\\/12{width:83.333333%}.tw-w-full{width:100%}.tw-z-20{z-index:20}@-webkit-keyframes tw-spin{to{transform:rotate(1turn)}}@keyframes tw-spin{to{transform:rotate(1turn)}}@-webkit-keyframes tw-ping{75%,to{transform:scale(2);opacity:0}}@keyframes tw-ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes tw-pulse{50%{opacity:.5}}@keyframes tw-pulse{50%{opacity:.5}}@-webkit-keyframes tw-bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes tw-bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:768px){.md\\:tw-px-4{padding-left:1rem;padding-right:1rem}}"),r.default.config.productionTip=!1,new r.default({el:"#registration",components:{RegistrationForm:U}}),new r.default({el:"#registrationSecondary",components:{RegistrationForm:U}}),new r.default({el:"#registration-exit-intent",components:{RegistrationForm:U}})}));
